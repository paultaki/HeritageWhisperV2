# ============================================
# HeritageWhisper - Environment Configuration Template
# ============================================
# Copy this file to .env.local for local development
# DO NOT commit .env.local to git!
#
# For Preview/Production: Configure these in Vercel dashboard
# Different values required per environment (see notes below)

# ============================================
# APPLICATION DOMAIN CONFIGURATION
# ============================================
# ‚ö†Ô∏è ENVIRONMENT-SPECIFIC: Must differ per environment

# Primary application URL (used for Stripe redirects, email links, family invites)
# Local: http://localhost:3000
# Preview: https://dev.heritagewhisper.com
# Production: https://heritagewhisper.com
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Site URL (used for PDF export, Supabase callbacks)
# Local: http://localhost:3000
# Preview: https://dev.heritagewhisper.com
# Production: https://heritagewhisper.com
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# ============================================
# WEBAUTHN / PASSKEY CONFIGURATION (Touch ID, Face ID)
# ============================================
# ‚ö†Ô∏è ENVIRONMENT-SPECIFIC: Must differ per environment
# üî¥ CRITICAL: Incorrect values will break passkey authentication!

# Origin URL for WebAuthn validation
# Local: http://localhost:3000
# Preview: https://dev.heritagewhisper.com
# Production: https://heritagewhisper.com
ORIGIN=http://localhost:3000

# Relying Party ID (domain without protocol)
# Local: localhost
# Preview: dev.heritagewhisper.com
# Production: heritagewhisper.com
RP_ID=localhost

# Relying Party Name (display name in passkey prompts)
# Local: HeritageWhisper (Local)
# Preview: HeritageWhisper (Preview)
# Production: HeritageWhisper
RP_NAME="HeritageWhisper (Local)"

# Iron-session encryption password (32-byte secret)
# Generate: openssl rand -base64 32
# SHARED across all environments (same value everywhere)
IRON_SESSION_PASSWORD=your-32-byte-base64-secret-here

# Cookie name for passkey sessions
# SHARED across all environments
COOKIE_NAME=hw_passkey_session

# ============================================
# SUPABASE CONFIGURATION
# ============================================
# SHARED across all environments (same values everywhere)

# Supabase project URL
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co

# Supabase anonymous key (safe to expose to browser)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Supabase service role key (‚ö†Ô∏è KEEP SECRET! Server-side only)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Supabase JWT secret (for token verification)
SUPABASE_JWT_SECRET=your-jwt-secret-here

# ============================================
# STRIPE CONFIGURATION (Payment Processing)
# ============================================
# ‚ö†Ô∏è ENVIRONMENT-SPECIFIC: Use test keys for local/preview, live keys for production
# Get keys from: https://dashboard.stripe.com/apikeys

# Stripe secret key (server-side only)
# Local: sk_test_...
# Preview: sk_test_...
# Production: sk_live_...
STRIPE_SECRET_KEY=sk_test_your-secret-key-here

# Stripe publishable key (exposed to browser)
# Local: pk_test_...
# Preview: pk_test_...
# Production: pk_live_...
NEXT_PUBLIC_STRIPE_PUBLIC_KEY=pk_test_your-publishable-key-here

# Stripe webhook secret (‚ö†Ô∏è Different per environment!)
# Create webhook endpoints in Stripe dashboard:
# Local: http://localhost:3000/api/stripe/webhook
# Preview: https://dev.heritagewhisper.com/api/stripe/webhook
# Production: https://heritagewhisper.com/api/stripe/webhook
# Format: whsec_xxxxxxxxxxxxxxxxxxxxx
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret-here

# Stripe Premium Price ID
# Create product in Stripe dashboard: HeritageWhisper Premium ($79/year)
# Local: price_test_...
# Preview: price_test_...
# Production: price_live_...
# Format: price_xxxxxxxxxxxxxxxxxxxxx
STRIPE_PREMIUM_PRICE_ID=price_your-price-id-here

# ============================================
# EMAIL CONFIGURATION (Resend)
# ============================================
# API key is SHARED across environments
RESEND_API_KEY=your-resend-api-key-here

# From address differs per environment
# Local: HeritageWhisper Dev <noreply@send.heritagewhisper.com>
# Preview: HeritageWhisper Dev <noreply@send.heritagewhisper.com>
# Production: HeritageWhisper <noreply@send.heritagewhisper.com>
RESEND_FROM_EMAIL=HeritageWhisper Dev <noreply@send.heritagewhisper.com>

# ============================================
# CRON JOB SECURITY
# ============================================
# Secret for authenticating Vercel cron jobs
# Generate with: openssl rand -base64 32
# Add to Vercel dashboard: Settings > Environment Variables
CRON_SECRET=your-secure-random-string-here

# ============================================
# AI SERVICES
# ============================================
# SHARED across all environments

# OpenAI API Key
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-your-api-key-here

# OpenAI key for browser (WebRTC Realtime API)
NEXT_PUBLIC_OPENAI_API_KEY=sk-proj-your-api-key-here

# Vercel AI Gateway (optional - provides observability & caching)
# Get from: https://vercel.com/dashboard/ai-gateway
AI_GATEWAY_API_KEY=vck_your-gateway-key-here

# AssemblyAI API Key (audio transcription)
# Get from: https://www.assemblyai.com/app/account
ASSEMBLYAI_API_KEY=your-assemblyai-key-here

# ============================================
# PDF EXPORT (PDFShift)
# ============================================
# SHARED across all environments
# Get from: https://app.pdfshift.io/account/keys
PDFSHIFT_API_KEY=sk_your-pdfshift-key-here

# ============================================
# RATE LIMITING (Upstash Redis)
# ============================================
# SHARED across all environments (can use same Redis instance)
# Get from: https://console.upstash.com/

# Redis REST URL
UPSTASH_REDIS_REST_URL=https://your-instance.upstash.io

# Redis REST token
UPSTASH_REDIS_REST_TOKEN=your-upstash-token-here

# ============================================
# AUDIO PROCESSING (Auphonic - Optional)
# ============================================
# SHARED across all environments
AUPHONIC_API_KEY=your-auphonic-key-here
AUPHONIC_CLEANER_PRESET_ID=your-preset-id-here

# ============================================
# OAUTH (Google - Optional)
# ============================================
# SHARED across all environments (configure redirect in Google Console)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=https://your-project.supabase.co/auth/v1/callback

# ============================================
# FEATURE FLAGS & DEVELOPMENT SETTINGS
# ============================================
# Enable OpenAI Realtime API (more expensive but conversational)
NEXT_PUBLIC_ENABLE_REALTIME=false

# Require beta code during signup (private beta mode)
# Set to "true" to enable beta code requirement
NEXT_PUBLIC_REQUIRE_BETA_CODE=false

# Admin email whitelist (comma-separated)
# Users with these emails can access /admin routes
ADMIN_EMAILS=your-email@example.com
NEXT_PUBLIC_ADMIN_EMAILS=your-email@example.com

# Node environment
NODE_ENV=development
